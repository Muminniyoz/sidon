(()=>{"use strict";function z(e){return"function"==typeof e}let M=!1;const p={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const s=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+s.stack)}else M&&console.log("RxJS: Back to a better error behavior. Thank you. <3");M=e},get useDeprecatedSynchronousErrorHandling(){return M}};function T(e){setTimeout(()=>{throw e},0)}const j={closed:!0,next(e){},error(e){if(p.useDeprecatedSynchronousErrorHandling)throw e;T(e)},complete(){}},W=Array.isArray||(e=>e&&"number"==typeof e.length),k=(()=>{function e(s){return Error.call(this),this.message=s?`${s.length} errors occurred during unsubscription:\n${s.map((t,r)=>`${r+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=s,this}return e.prototype=Object.create(Error.prototype),e})();class b{constructor(s){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,s&&(this._ctorUnsubscribe=!0,this._unsubscribe=s)}unsubscribe(){let s;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:r,_unsubscribe:h,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof b)t.remove(this);else if(null!==t)for(let n=0;n<t.length;++n)t[n].remove(this);if(z(h)){r&&(this._unsubscribe=void 0);try{h.call(this)}catch(n){s=n instanceof k?V(n.errors):[n]}}if(W(o)){let n=-1,u=o.length;for(;++n<u;){const c=o[n];if(null!==(e=c)&&"object"==typeof e)try{c.unsubscribe()}catch(i){s=s||[],i instanceof k?s=s.concat(V(i.errors)):s.push(i)}}}var e;if(s)throw new k(s)}add(s){let t=s;if(!s)return b.EMPTY;switch(typeof s){case"function":t=new b(s);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof b)){const o=t;t=new b,t._subscriptions=[o]}break;default:throw new Error("unrecognized teardown "+s+" added to Subscription.")}let{_parentOrParents:r}=t;if(null===r)t._parentOrParents=this;else if(r instanceof b){if(r===this)return t;t._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return t;r.push(this)}const h=this._subscriptions;return null===h?this._subscriptions=[t]:h.push(t),t}remove(s){const t=this._subscriptions;if(t){const r=t.indexOf(s);-1!==r&&t.splice(r,1)}}}var e;function V(e){return e.reduce((s,t)=>s.concat(t instanceof k?t.errors:t),[])}b.EMPTY=((e=new b).closed=!0,e);const A="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class S extends b{constructor(s,t,r){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=j;break;case 1:if(!s){this.destination=j;break}if("object"==typeof s){s instanceof S?(this.syncErrorThrowable=s.syncErrorThrowable,this.destination=s,s.add(this)):(this.syncErrorThrowable=!0,this.destination=new Y(this,s));break}default:this.syncErrorThrowable=!0,this.destination=new Y(this,s,t,r)}}[A](){return this}static create(s,t,r){const h=new S(s,t,r);return h.syncErrorThrowable=!1,h}next(s){this.isStopped||this._next(s)}error(s){this.isStopped||(this.isStopped=!0,this._error(s))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(s){this.destination.next(s)}_error(s){this.destination.error(s),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:s}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=s,this}}class Y extends S{constructor(s,t,r,h){super(),this._parentSubscriber=s;let o,n=this;z(t)?o=t:t&&(o=t.next,r=t.error,h=t.complete,t!==j&&(n=Object.create(t),z(n.unsubscribe)&&this.add(n.unsubscribe.bind(n)),n.unsubscribe=this.unsubscribe.bind(this))),this._context=n,this._next=o,this._error=r,this._complete=h}next(s){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;p.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,s)&&this.unsubscribe():this.__tryOrUnsub(this._next,s)}}error(s){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:r}=p;if(this._error)r&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,s),this.unsubscribe()):(this.__tryOrUnsub(this._error,s),this.unsubscribe());else if(t.syncErrorThrowable)r?(t.syncErrorValue=s,t.syncErrorThrown=!0):T(s),this.unsubscribe();else{if(this.unsubscribe(),r)throw s;T(s)}}}complete(){if(!this.isStopped){const{_parentSubscriber:s}=this;if(this._complete){const t=()=>this._complete.call(this._context);p.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable?(this.__tryOrSetError(s,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(s,t){try{s.call(this._context,t)}catch(r){if(this.unsubscribe(),p.useDeprecatedSynchronousErrorHandling)throw r;T(r)}}__tryOrSetError(s,t,r){if(!p.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(h){return p.useDeprecatedSynchronousErrorHandling?(s.syncErrorValue=h,s.syncErrorThrown=!0,!0):(T(h),!0)}return!1}_unsubscribe(){const{_parentSubscriber:s}=this;this._context=null,this._parentSubscriber=null,s.unsubscribe()}}const C="function"==typeof Symbol&&Symbol.observable||"@@observable";function ss(e){return e}let B=(()=>{class e{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const r=new e;return r.source=this,r.operator=t,r}subscribe(t,r,h){const{operator:o}=this,n=function(e,s,t){if(e){if(e instanceof S)return e;if(e[A])return e[A]()}return e||s||t?new S(e,s,t):new S(j)}(t,r,h);if(n.add(o?o.call(n,this.source):this.source||p.useDeprecatedSynchronousErrorHandling&&!n.syncErrorThrowable?this._subscribe(n):this._trySubscribe(n)),p.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable&&(n.syncErrorThrowable=!1,n.syncErrorThrown))throw n.syncErrorValue;return n}_trySubscribe(t){try{return this._subscribe(t)}catch(r){p.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=r),function(e){for(;e;){const{closed:s,destination:t,isStopped:r}=e;if(s||r)return!1;e=t&&t instanceof S?t:null}return!0}(t)?t.error(r):console.warn(r)}}forEach(t,r){return new(r=F(r))((h,o)=>{let n;n=this.subscribe(u=>{try{t(u)}catch(c){o(c),n&&n.unsubscribe()}},o,h)})}_subscribe(t){const{source:r}=this;return r&&r.subscribe(t)}[C](){return this}pipe(...t){return 0===t.length?this:function(e){return 0===e.length?ss:1===e.length?e[0]:function(t){return e.reduce((r,h)=>h(r),t)}}(t)(this)}toPromise(t){return new(t=F(t))((r,h)=>{let o;this.subscribe(n=>o=n,n=>h(n),()=>r(o))})}}return e.create=s=>new e(s),e})();function F(e){if(e||(e=p.Promise||Promise),!e)throw new Error("no Promise impl found");return e}const v=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})();class ts extends b{constructor(s,t){super(),this.subject=s,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const s=this.subject,t=s.observers;if(this.subject=null,!t||0===t.length||s.isStopped||s.closed)return;const r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}class is extends S{constructor(s){super(s),this.destination=s}}let J=(()=>{class e extends B{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[A](){return new is(this)}lift(t){const r=new L(this,this);return r.operator=t,r}next(t){if(this.closed)throw new v;if(!this.isStopped){const{observers:r}=this,h=r.length,o=r.slice();for(let n=0;n<h;n++)o[n].next(t)}}error(t){if(this.closed)throw new v;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:r}=this,h=r.length,o=r.slice();for(let n=0;n<h;n++)o[n].error(t);this.observers.length=0}complete(){if(this.closed)throw new v;this.isStopped=!0;const{observers:t}=this,r=t.length,h=t.slice();for(let o=0;o<r;o++)h[o].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new v;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new v;return this.hasError?(t.error(this.thrownError),b.EMPTY):this.isStopped?(t.complete(),b.EMPTY):(this.observers.push(t),new ts(this,t))}asObservable(){const t=new B;return t.source=this,t}}return e.create=(s,t)=>new L(s,t),e})();class L extends J{constructor(s,t){super(),this.destination=s,this.source=t}next(s){const{destination:t}=this;t&&t.next&&t.next(s)}error(s){const{destination:t}=this;t&&t.error&&this.destination.error(s)}complete(){const{destination:s}=this;s&&s.complete&&this.destination.complete()}_subscribe(s){const{source:t}=this;return t?this.source.subscribe(s):b.EMPTY}}addEventListener("message",({data:e})=>{a.start(e).subscribe(s=>{postMessage(s)})});class a{static start(s){return setTimeout(()=>{try{this.seperate(s)}catch(t){this.subject$.next({type:"error",progress:0,data:t})}},10),this.subject$}static seperate(s){this.changeProgress(5,"Ma'lumotlarni bo'lish");const t=s.slice(0,2).concat(s.slice(2).sort((i,l)=>(i[this.m-1]+"").localeCompare(""+l[this.m-1])));this.n=t.length,this.m=t[0].length;let r=this.m,h=this.n;this.sohaNom=t[0][1];let o=[];o.push([]);for(let i=2;i<r-1;i++)this.alomatNomlar[i-2]=t[1][i],o[0][i-2]=t[0][i];this.sinfSon=t[0][r-1];for(let i=2;i<h;i++){this.obyektNomlar[i-1]=t[i][1],this.obyektKodlar[i-1]=t[i][0],o.push([]);for(let l=2;l<r-1;l++)o[i-1][l-2]=t[i][l];this.obyektSinflar[i-1]=(t[i][r-1]+"").trim()}this.m-=3,this.n-=1,this.a=o,this.changeProgress(10,"Sinflarni sanash"),this.sinflarniSanash();for(let i=0;i<this.n;i++)this.ax.push([]);for(let i=0;i<4;i++)this.cc.push([]);this.changeProgress(50,"Alomatlar vaznini hisoblash");for(let i=0;i<this.m;i++)1==o[0][i]?this.p_miqdory(i):this.nominal(i);console.log(this.ax),this.changeProgress(60,"Alomatlar vaznini saralash"),this.R.sort((i,l)=>l.w-i.w),this.changeProgress(70,"Obyektlar vaznini hisoblash");for(let i=0;i<this.m;i++){let l=[-1,1];if(1==o[0][i]){let d=l[Math.floor(100*Math.random())%2];this.miqdoriy(i,d)}}this.changeProgress(80,"R(s) ni hisoblash"),console.log(this.ax),this.RotS(),console.log(this.ax);let n=this.ax[1][0],u=n;for(let i=2;i<this.n;i++)this.ax[i][0]>n&&(n=this.ax[i][0]),this.ax[i][0]<u&&(u=this.ax[i][0]);this.changeProgress(85,"R(s) ni yozish");for(let i=1;i<this.n;i++)this.rs[i]={},this.rs[i].t=i,this.rs[i].k=this.obyektSinflar[i],this.rs[i].r=(this.ax[i][0]-u)/(n-u);this.changeProgress(90,"R(s) ni saralash"),console.log(this.rs),this.rs.sort((i,l)=>l.r-i.r),this.changeProgress(95,"Natijani tayyorlash");const c=[];c.push(Array(10).fill("",0,10)),c[0][0]="Natija",c.push([]),c.push(["Alomatlar hissasi"]),c.push(["\u2116","Alomat","c0","c1","c2","Alomat vazni","u11","u12","u21","u22"]);for(let i=0;i<this.m;i++)c.push([i+1,this.alomatNomlar[this.R[i].k],this.R[i].c0,this.R[i].c1,this.R[i].c2,this.R[i].w,this.R[i].u11,this.R[i].u12,this.R[i].u21,this.R[i].u22]);this.changeProgress(98,"Natijani tayyorlash"),c.push([]),c.push([]),c.push(["R(s) jadvali"]),c.push([]),c.push(["\u2116","KOD",t[1][1],"Sinf","Bahosi"]);for(let i=0;i<this.n-1;i++)c.push([i+1,this.obyektKodlar[this.rs[i].t],this.obyektNomlar[this.rs[i].t],this.rs[i].k,this.rs[i].r]);c.push([]),this.changeProgress(99,"Natijani chiqarish"),this.subject$.next({type:"success",progress:0,data:c})}static sinflarniSanash(){this.sinfTurlar=this.obyektSinflar.filter((s,t,r)=>s&&r.indexOf(s)==t),this.sinfSon=this.sinfTurlar.length;for(let s of this.sinfTurlar)this.sinfAzoSon[s]=0;for(let s=1;s<this.n;s++)this.sinfAzoSon[this.obyektSinflar[s]]++}static nominal(s){var t,r,h,o,n,u,c,i,l,d,U,D,H,$,q,I,O;let P=new Set;for(let f=1;f<this.n;f++)P.add(this.a[f][s]);let rs=P.size,_=new Map;for(let f of this.sinfTurlar){let R=new Map;for(let E=1;E<this.n;E++)if(f==this.obyektSinflar[E]){const Q=this.a[E][s];R.set(Q,(null!==(t=R.get(Q))&&void 0!==t?t:0)+1)}_.set(f,R)}let y=this.sinfTurlar[0],m=this.sinfTurlar[1],w=0;for(let f of P)w+=(null!==(h=null===(r=_.get(y))||void 0===r?void 0:r.get(f))&&void 0!==h?h:0)*(null!==(n=null===(o=_.get(m))||void 0===o?void 0:o.get(f))&&void 0!==n?n:0);let es=1-w/(this.sinfAzoSon[y]*this.sinfAzoSon[m]),x=[0,0,0],g=[0,0,0];if(x[1]=null!==(c=null===(u=_.get(y))||void 0===u?void 0:u.size)&&void 0!==c?c:0,x[2]=null!==(l=null===(i=_.get(m))||void 0===i?void 0:i.size)&&void 0!==l?l:0,rs>2?(g[1]=(this.sinfAzoSon[y]-x[1]+1)*(this.sinfAzoSon[y]-x[1]),g[2]=(this.sinfAzoSon[m]-x[2]+1)*(this.sinfAzoSon[m]-x[2])):(g[1]=this.sinfAzoSon[y]*(this.sinfAzoSon[y]-1),g[2]=this.sinfAzoSon[m]*(this.sinfAzoSon[m]-1)),w=0,g[1]+g[2]!=0){for(let f of P){let R=null!==(U=null===(d=_.get(y))||void 0===d?void 0:d.get(f))&&void 0!==U?U:0,E=null!==(H=null===(D=_.get(m))||void 0===D?void 0:D.get(f))&&void 0!==H?H:0;w+=R*(R-1)+E*(E-1)}w/=g[1]+g[2]}let G=es*w;this.R[s]={},this.R[s].k=s,this.R[s].t=0,this.R[s].c0=0,this.R[s].c1=0,this.R[s].c2=0,this.R[s].w=G,this.ax[0][s+1]=0;for(let f=1;f<this.n;f++)this.ax[f][s+1]=G*((null!==(q=null===($=_.get(y))||void 0===$?void 0:$.get(this.a[f][s]))&&void 0!==q?q:0)/this.sinfAzoSon[y]-(null!==(O=null===(I=_.get(m))||void 0===I?void 0:I.get(this.a[f][s]))&&void 0!==O?O:0)/this.sinfAzoSon[m])}static p_miqdory(s){let t=[],r=[];for(let c=1;c<this.n;c++)t[c-1]=this.a[c][s];t.sort((c,i)=>i-c),r=[...new Set(t)];let h=r.length-1,o=this.wmax(s,r[1]);this.R[s]={},this.R[s].u11=o.u[1][1],this.R[s].u12=o.u[1][2],this.R[s].u21=o.u[2][1],this.R[s].u22=o.u[2][2];let n=o.wmax,u=r[1];for(let c=2;c<h;c++){let i=this.wmax(s,r[c]);n<i.wmax&&(u=r[c],n=i.wmax,this.R[s].u11=i.u[1][1],this.R[s].u12=i.u[1][2],this.R[s].u21=i.u[2][1],this.R[s].u22=i.u[2][2])}this.R[s].k=s,this.R[s].c0=r[h],this.R[s].c1=u,this.R[s].c2=r[0],this.R[s].w=n,this.cc[0][s]=this.R[s].c0,this.cc[1][s]=this.R[s].c1,this.cc[2][s]=this.R[s].c2,this.cc[3][s]=this.R[s].w}static wmax(s,t){let r=[[0,0,0],[0,0,0],[0,0,0]];for(let i=1;i<this.n;i++)if(this.obyektSinflar[i]==this.sinfTurlar[0])this.a[i][s]<=t?r[1][1]++:r[1][2]++;else{if(this.obyektSinflar[i]!=this.sinfTurlar[1])throw new Error("U ni sanashda xatolik. Maksimal 2 ta sinf sanash nazarda tutilgan. Ammo "+this.obyektSinflar[i]+" sinfi ortiqcha bo'lib qoldi");this.a[i][s]<=t?r[2][1]++:r[2][2]++}let u,h=0,o=0,n=0;for(let i=1;i<=2;i++){h+=r[i][1]*(r[i][1]-1)+r[i][2]*(r[i][2]-1);let l=this.sinfAzoSon[this.sinfTurlar[i-1]];o+=Math.abs(l)*Math.abs(l-1),u=0;for(let d=1;d<=2;d++)u+=r[d][i]*(Math.abs(this.sinfAzoSon[this.sinfTurlar[2-d]])-r[3-d][i]);n+=u}return{u:r,wmax:h/o*(n/(2*Math.abs(this.sinfAzoSon[this.sinfTurlar[0]])*Math.abs(this.sinfAzoSon[this.sinfTurlar[1]])))}}static miqdoriy(s,t){this.ax[0][s+1]=t;let r=t*this.cc[3][s],h=this.cc[2][s]-this.cc[0][s];for(let o=1;o<this.n;o++)this.ax[o][s+1]=r*(this.a[o][s]-this.cc[1][s])/h}static RotS(){let s=[];for(let n=1;n<this.n;n++){let u=0;for(let c=1;c<=this.m;c++)u+=this.ax[n][c];this.ax[n][0]=u,s[n]=u}let t=this.staxastik(s),r=0,h=1,o=0;for(;r<1e6;){if(o++,r++,o>this.m&&(o=1),0!=this.ax[0][o]){for(let u=1;u<this.n;u++)s[u]=this.ax[u][0]-2*this.ax[u][o];let n=this.staxastik(s);if(t<n){t=n,h=1,this.ax[0][o]*=-1;for(let u=1;u<this.n;u++)this.ax[u][o]*=-1,this.ax[u][0]=s[u]}else h++}if(h>this.m-1)break}}static staxastik(s){let t=s[1],r=s[this.n-1];for(let h=1;h<=this.sinfAzoSon[this.sinfTurlar[0]];h++)s[h]<t&&(t=s[h]);for(let h=this.sinfAzoSon[this.sinfTurlar[0]]+1;h<this.n;h++)r<s[h]&&(r=s[h]);return t-r}static changeProgress(s,t){this.subject$.next({type:"progress",progress:s,data:t})}}a.subject$=new J,a.sohaNom="",a.obyektNomlar=[],a.obyektKodlar=[],a.alomatNomlar=[],a.alomatTur=[],a.obyektSinflar=[],a.sinfSon=0,a.sinfTurlar=[],a.sinfAzoSon=[0,0,0],a.a=[],a.ax=[],a.cc=[],a.n=0,a.m=0,a.R=[],a.rs=[]})();