"use strict";(self.webpackChunkSIDON=self.webpackChunkSIDON||[]).push([[809],{65809:(E,p,r)=>{r.r(p),r.d(p,{LoginModule:()=>J});var M=r(38583),i=r(3679),T=r(15566),d=r(7736),g=r(54655),A=r(7861),t=r(37716),h=r(88002),q=r(92340),Z=r(54853),P=r(91841),F=r(69939);let v=(()=>{class o{constructor(e,n,a){this.jwtUtil=e,this.http=n,this.accountService=a,this.api=q.N.baseUrl+"/api/account"}login(e){return this.http.post(this.api+"/authenticate",e).pipe((0,h.U)(n=>{this.jwtUtil.save(n.token,e.rememberMe),this.accountService.identity(!0)}))}logout(){this.jwtUtil.clear(),this.accountService.authenticate(null)}register(e){return this.http.post(this.api+"/register",e).pipe((0,h.U)(n=>{this.jwtUtil.save(n.token,e.rememberMe),this.accountService.identity(!0)}))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(Z.M),t.LFG(P.eN),t.LFG(F.B))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var x=r(77001),L=r(15978),m=r(35618),u=r(98295),C=r(49983),k=r(7539),I=r(88030),y=r(51095);const O=function(){return{"margin-bottom.px":10}},U=function(){return["register"]},w=function(){return["/"]};let S=(()=>{class o{constructor(e,n,a,c,s,b){this.router=e,this.formBuilder=n,this.loginService=a,this._snackBar=c,this.jwtUtil=s,this.stateStorageService=b,this.surovBajarilmoqda=!1}ngOnInit(){this.loginForm=this.formBuilder.group({login:[null,[i.kI.required,i.kI.minLength(6)]],parol:[null,[i.kI.required,i.kI.minLength(6)]],rememberMe:[null]})}onLogin(){this.jwtUtil.clear();const e=this.loginForm.getRawValue();this.surovBajarilmoqda=!0,this.loginService.login(e).subscribe(()=>{this.surovBajarilmoqda=!1,this.jwtUtil.getRoles();const a=this.stateStorageService.getUrl();this.router.navigate(a&&"/admin/user"!=a?[a]:["/admin"])},n=>{let a=A.u.loginError;n&&n.error&&n.error.message&&"INVALID_CREDENTIALS"!=n.error.message&&(a=n.error.message),this._snackBar.open(a,"X",{duration:4e3,verticalPosition:"bottom"}),this.surovBajarilmoqda=!1},()=>{this.surovBajarilmoqda=!1})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.F0),t.Y36(i.qu),t.Y36(v),t.Y36(x.ux),t.Y36(Z.M),t.Y36(L.L))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-login"]],decls:27,vars:8,consts:[[1,"login-page"],[1,"content","px20"],[1,"login-form",3,"formGroup","ngSubmit"],[1,"text-center"],[1,"app-name"],["fxLayout","row"],["fxFlexFill",""],[1,"w-100"],["matInput","","formControlName","login","placeholder","Login . . ."],["matInput","","formControlName","parol","type","password","placeholder","Parol  . . ."],["fxLayout","row","fxLayoutAlign","space-between","fxLayout.xs","column",1,"mt20","mb20"],["formControlName","rememberMe","color","primary",3,"ngStyle.xs"],["fxLayout","column"],["fxFlexFill","","fxFlexFill.lg","6"],["type","submit","mat-raised-button","","color","primary",1,"w-100",3,"disabled"],["fxFlexFill","","fxFlexFil.lg","6"],["color","secondary",1,"w-50",3,"routerLink"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"form",2),t.NdJ("ngSubmit",function(){return n.onLogin()}),t.TgZ(3,"div",3),t.TgZ(4,"h1",4),t._uU(5," PRODON "),t.qZA(),t.TgZ(6,"h2"),t._uU(7," Tizimga kirish"),t.qZA(),t.qZA(),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"mat-form-field",7),t._UZ(11,"input",8),t.qZA(),t.TgZ(12,"mat-form-field",7),t._UZ(13,"input",9),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",10),t.TgZ(15,"mat-checkbox",11),t._uU(16,"Eslab qol "),t.qZA(),t.qZA(),t.TgZ(17,"div",12),t.TgZ(18,"div",13),t.TgZ(19,"button",14),t._uU(20,"Kirish"),t.qZA(),t.qZA(),t.TgZ(21,"div",15),t.TgZ(22,"a",16),t._uU(23,"Ro'yxatdan o'tish"),t.qZA(),t._UZ(24,"br"),t.TgZ(25,"a",16),t._uU(26,"Bosh sahifaga qaytish"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("formGroup",n.loginForm),t.xp6(13),t.Q6J("ngStyle.xs",t.DdM(5,O)),t.xp6(4),t.Q6J("disabled",n.loginForm.invalid||n.surovBajarilmoqda),t.xp6(3),t.Q6J("routerLink",t.DdM(6,U)),t.xp6(3),t.Q6J("routerLink",t.DdM(7,w)))},directives:[i._Y,i.JL,i.sg,m.xw,m.s9,u.KE,C.Nt,i.Fj,i.JJ,i.u,m.Wh,k.oG,I.Zl,y.lW,g.yS],styles:['.login-page[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;position:relative}.login-page[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{z-index:1;display:flex;align-items:center;justify-content:center}.login-page[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .app-name[_ngcontent-%COMP%]{margin-top:0;padding-bottom:10px;font-size:32px;text-align:center}.login-page[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{padding:40px;background:#ffffff;max-width:500px;box-shadow:0 0 20px #ddd}.login-page[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill{box-shadow:0 0 0 30px #fff inset;-webkit-box-shadow:0 0 0 30px #ffffff inset}.login-page[_ngcontent-%COMP%]:after{content:"";background:#ffffff;position:absolute;top:0;left:0;bottom:50%;right:0}.login-page[_ngcontent-%COMP%]:before{content:"";background:#3f51b5;position:absolute;top:50%;left:0;bottom:0;right:0}.mt-5[_ngcontent-%COMP%]{margin-top:30px;display:inline-block;margin-left:auto}.w-100[_ngcontent-%COMP%]{width:100%}']}),o})();var f=r(43220);const j=function(){return["/login"]},N=function(){return["/"]},B=[{path:"",component:S},{path:"register",component:(()=>{class o{constructor(e,n,a,c){this.router=e,this.formBuilder=n,this.loginService=a,this._snackBar=c,this.surovBajarilmoqda=!1,this.checkPasswords=b=>this.registerForm&&this.registerForm.get("password").value===this.registerForm.get("re_password").value?null:{notSame:!0};const s=(new Date).getFullYear();this.minDate=new Date(s-60,0,0),this.maxDate=new Date(s+0,0,0)}ngOnInit(){this.registerForm=this.formBuilder.group({id:[{value:"",disabled:!0}],ism:[null,i.kI.required],familiya:[null,i.kI.required],sharif:[null],tugKun:[null],pasport:[null],telefon:[null],manzil:[null],login:[null,[i.kI.required,i.kI.minLength(6)]],parol:[null,[i.kI.required,i.kI.minLength(6)]],tasdiqParol:[null,[i.kI.required,i.kI.minLength(6)],this.checkIfMatchingPasswords("parol","tasdiqParol")]})}checkIfMatchingPasswords(e,n){return a=>{let s=this.registerForm.controls[n];return s.setErrors(this.registerForm.controls[e].value!==s.value?{notEquivalent:!0}:null)}}onRegister(){const e=this.registerForm.getRawValue();this.surovBajarilmoqda=!0,this.loginService.register(e).subscribe(n=>{this.router.navigate(["/login"])},n=>{let a="bunday foydalanuvchi mavjud!";n.error.message&&"INVALID_CREDENTIALS"!=n.error.message&&(a=n.error.message),this._snackBar.open(a,"X",{duration:4e3,verticalPosition:"bottom"}),this.surovBajarilmoqda=!1})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.F0),t.Y36(i.qu),t.Y36(v),t.Y36(x.ux))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-register"]],decls:47,vars:10,consts:[[1,"login-page"],[1,"content","px20"],[1,"login-form",3,"formGroup","ngSubmit"],[1,"text-center"],[1,"app-name"],["fxLayout","row"],["fxFlexFill",""],[1,"w-100"],["matInput","","formControlName","ism","placeholder","Ismingizni kiriting . . ."],["color","accent"],["matInput","","formControlName","familiya","placeholder","Familiyangizni kiriting . . ."],["matInput","","formControlName","sharif","placeholder","Otangizni ismini kiriting . . ."],["appearance","fill",1,"example-full-width"],["matInput","","formControlName","tugkun",3,"min","max","matDatepicker"],["matSuffix","",3,"for"],["picker",""],["matInput","","formControlName","pasport","placeholder","Pasport raqamini kiriting . . ."],["matInput","","formControlName","telefon","type","tel","placeholder","Telefonni kiriting . . ."],["matInput","","formControlName","manzil","placeholder","Yashash manzilni kiriting . . ."],["matInput","","formControlName","login","placeholder","Login . . ."],["matInput","","formControlName","parol","type","password","placeholder","Parol  . . ."],["matInput","","formControlName","tasdiqParol","type","password","placeholder","Parolni qayta kiriting  . . ."],["fxLayout","column"],["fxFlexFill","","fxFlexFill.lg","6"],["type","submit","mat-raised-button","","color","primary",1,"w-100",3,"disabled"],["fxFlexFill","","fxFlexFil.lg","6"],["color","secondary",1,"w-50",3,"routerLink"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"form",2),t.NdJ("ngSubmit",function(){return n.onRegister()}),t.TgZ(3,"div",3),t.TgZ(4,"h1",4),t._uU(5,"PRODON"),t.qZA(),t.TgZ(6,"h2"),t._uU(7," Ruyhatdan o'tish"),t.qZA(),t.qZA(),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"mat-form-field",7),t._UZ(11,"input",8),t.TgZ(12,"mat-hint",9),t._uU(13,"*iltimos ismingizga etiborli buling. Keyinchalik ismni uzgartirib bulmaydi"),t.qZA(),t.qZA(),t.TgZ(14,"mat-form-field",7),t._UZ(15,"input",10),t.qZA(),t.TgZ(16,"mat-form-field",7),t._UZ(17,"input",11),t.qZA(),t.TgZ(18,"mat-form-field",12),t.TgZ(19,"mat-label"),t._uU(20,"tugilgan kunni kiriting"),t.qZA(),t._UZ(21,"input",13),t._UZ(22,"mat-datepicker-toggle",14),t._UZ(23,"mat-datepicker",null,15),t.qZA(),t.TgZ(25,"mat-form-field",7),t._UZ(26,"input",16),t.qZA(),t.TgZ(27,"mat-form-field",7),t._UZ(28,"input",17),t.qZA(),t.TgZ(29,"mat-form-field",7),t._UZ(30,"input",18),t.qZA(),t.TgZ(31,"mat-form-field",7),t._UZ(32,"input",19),t.qZA(),t.TgZ(33,"mat-form-field",7),t._UZ(34,"input",20),t.qZA(),t.TgZ(35,"mat-form-field",7),t._UZ(36,"input",21),t.qZA(),t.qZA(),t.qZA(),t.TgZ(37,"div",22),t.TgZ(38,"div",23),t.TgZ(39,"button",24),t._uU(40,"Ro'yhatdan o'tish"),t.qZA(),t.qZA(),t.TgZ(41,"div",25),t.TgZ(42,"a",26),t._uU(43,"Tizimga kirish"),t.qZA(),t._UZ(44,"br"),t.TgZ(45,"a",26),t._uU(46,"Bosh sahifaga qaytish"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const a=t.MAs(24);t.xp6(2),t.Q6J("formGroup",n.registerForm),t.xp6(19),t.Q6J("min",n.minDate)("max",n.maxDate)("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(17),t.Q6J("disabled",n.registerForm.invalid||n.surovBajarilmoqda),t.xp6(3),t.Q6J("routerLink",t.DdM(8,j)),t.xp6(3),t.Q6J("routerLink",t.DdM(9,N))}},directives:[i._Y,i.JL,i.sg,m.xw,m.s9,u.KE,C.Nt,i.Fj,i.JJ,i.u,u.bx,u.hX,f.hl,f.nW,u.R9,f.Mq,y.lW,g.yS],styles:['.login-page[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100%;position:relative}.login-page[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{z-index:1;display:flex;align-items:center;justify-content:center;margin:20px auto}.login-page[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .app-name[_ngcontent-%COMP%]{margin-top:0;padding-bottom:10px;font-size:32px}.login-page[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{padding:40px;background:#ffffff;max-width:500px;box-shadow:0 0 20px #ddd}.login-page[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill{box-shadow:0 0 0 30px #fff inset;-webkit-box-shadow:0 0 0 30px #ffffff inset}.login-page[_ngcontent-%COMP%]:after{content:"";background:#ffffff;position:absolute;top:0;left:0;bottom:50%;right:0}.login-page[_ngcontent-%COMP%]:before{content:"";background:#3f51b5;position:absolute;top:50%;left:0;bottom:0;right:0}.mt-5[_ngcontent-%COMP%]{margin-top:30px;display:inline-block;margin-left:auto}']}),o})()}];let R=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[g.Bz.forChild(B)],g.Bz]}),o})();var D=r(44466);let J=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[M.ez,i.u5,i.UX,T.o9,d.IR,R,d.IR,D.m]]}),o})()}}]);